{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
    <label>
        Название школы: <input type="text" name="title">
    </label>
    <br>
    Регионы:
    <ul>
        {% for region in regions %}
            <li>
                <label>
                    <input type="checkbox" name="regions" value="{{ region.pk }}">
                    {{ region.title }}
                </label>
                <ul>
                    {% for district in region.district_set.all %}
                        <label>
                            <input data-region-id="{{ region.pk }}" type="checkbox" name="districts" value="{{ district.pk }}">
                            {{ district.title }}
                        </label>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
    <div data-content="schools"></div>
{% endblock %}
{% block js %}
    <script src="{% static 'js/school-searcher.js' %}"></script>
    <script>
        var searchUrl = '{% url 'schools:search' %}';

        SchoolSearcher.init({
            searchUrl: searchUrl,
            schoolsContainer: $('[data-content="schools"]'),
            titleInput: $('input[name="title"]'),
            regionsInputs: $('input[name="regions"]'),
            districtsInputs: $('input[name="districts"]'),
            paginationLinkSelector: '[data-action="pagination"]'
        });
    </script>
{% endblock %}